{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Engine",
            "type": "go",
            "request": "launch",
            "mode": "auto",
            "program": "./cmd/engine",
            "cwd": "${workspaceFolder}/out",
            "args": [
                "Run",
                "-i=${file}",
                "-v=2",
                "-o=${fileBasenameNoExtension}",
                "--profiling=${fileBasenameNoExtension}/engine.prof"
            ],
            "env": {
                "KLOTHO_DEBUG_DIR": "${workspaceFolder}/out/${fileBasenameNoExtension}",
                "COLUMNS": "120"
            }
        },
        {
            "name": "IaC",
            "type": "go",
            "request": "launch",
            "mode": "auto",
            "program": "./cmd/iac",
            "cwd": "${workspaceFolder}/out",
            "args": [
                "Generate",
                "-i=${file}",
                "-v",
                "-o=${fileBasenameNoExtension}/iac",
                "--profiling=${fileBasenameNoExtension}/iac.prof"
            ]
        },
        {
            "name": "Klotho",
            "type": "go",
            "request": "launch",
            "mode": "auto",
            "program": "./cmd/klotho",
            "cwd": "${workspaceFolder}",
            "args": [
                "-v",
                "-a",
                // "b879296f-94dd-4cb7-a7fe-99980965376f", // prod ID
                "2fa61fd0-e1db-4557-bf82-3c98c020a598", // local ID
                "../infracopilot"
            ],
            "env": {
                "BROWSER": "none",
                "INFRACOPILOT_URL": "http://localhost:3000",
                "AUTH_DOMAIN": "klotho-dev.us.auth0.com",
                "AUTH_CLIENT_ID": "A0sIE3wvh8LpG8mtJEjWPnBqZgBs5cNM"
            }
        },
        {
            "name": "k2",
            "type": "go",
            "request": "launch",
            "mode": "auto",
            "program": "./cmd/k2",
            "cwd": "${workspaceFolder}",
            "args": [
                "up",
                "-v",
                "-o=${workspaceFolder}/out",
                "--profiling=${workspaceFolder}/out/k2.prof",
                "--dry-run",
                "${file}"
            ],
            "env": {
                "KLOTHO_DEBUG_DIR": "${workspaceFolder}/out"
            }
        },
        {
            "name": "Debug: k2",
            "type": "go",
            "request": "launch",
            "mode": "auto",
            "program": "./cmd/k2",
            "cwd": "${workspaceFolder}/pkg/k2/language_host/python/samples",
            "args": [
                "up",
                "-v=3",
                "-o=${workspaceFolder}/out",
                "--profiling=${workspaceFolder}/out/k2.prof",
                "-n=1",
                "--debug=vscode",
                "${file}"
                // "infra.py"
            ],
            "env": {
                "KLOTHO_DEBUG_DIR": "${workspaceFolder}/out",
                "AWS_REGION": "${env:AWS_REGION}",
            },
            "console": "integratedTerminal"
        },
        {
            "name": "Python Debugger: Listen",
            "type": "debugpy",
            "request": "attach",
            "listen": {
                "host": "localhost",
                "port": 5678,
            },
        },
        {
            "name": "k2: deploy",
            "type": "go",
            "request": "launch",
            "mode": "auto",
            "program": "./cmd/k2",
            "cwd": "${workspaceFolder}/pkg/k2/language_host/python/samples",
            "args": [
                "up",
                "-v=3",
                "-o=${workspaceFolder}/out",
                "--profiling=${workspaceFolder}/out/k2.prof",
                "${file}"
            ],
            "env": {
                "KLOTHO_DEBUG_DIR": "${workspaceFolder}/out",
                "AWS_REGION": "${env:AWS_REGION}",
            },
            "console": "integratedTerminal"
        },
        {
            "name": "k2: destroy",
            "type": "go",
            "request": "launch",
            "mode": "auto",
            "program": "./cmd/k2",
            "cwd": "${workspaceFolder}/pkg/k2/language_host/python/samples",
            "args": [
                "down",
                "-v=3",
                "-o=${workspaceFolder}/out",
                "--profiling=${workspaceFolder}/out/k2.prof",
                "${file}"
            ],
            "env": {
                "KLOTHO_DEBUG_DIR": "${workspaceFolder}/out",
                "AWS_REGION": "${env:AWS_REGION}",
            },
            "console": "integratedTerminal"
        },
    ],
    "compounds": [
        {
            "name": "Debug: k2 + infra.py",
            "configurations": [
                "Debug: k2",
                "Python Debugger: Listen"
            ],
            "stopAll": true,
        }
    ]
}
