from: klotho.aws.FastAPI
to: klotho.aws.Postgres
type: read
resources:
  TaskDefinition:
    ContainerDefinitions[0].Environment:
      #      - ${...from.resources:TaskDefinition.ContainerDefinitions[0].Environment}
      - Name: ${to.inputs:Name}_POSTGRES_ENDPOINT
        Value: ${to:outputs.Endpoint}
      - Name: ${to.inputs:Name}_POSTGRES_DATABASE
        Value: ${to:outputs.DatabaseName}
      - Name: ${to.inputs:Name}_POSTGRES_USER
        Value: ${to:outputs.Username}
      - Name: ${to.inputs:Name}_POSTGRES_PASSWORD
        Value: ${to:outputs.Password}
      - Name: ${to.inputs:Name}_POSTGRES_PORT
        Value: ${to:outputs.Port}
      - Name: ${to.inputs:Name}_POSTGRES_CONNECTION_STRING
        Value: ${to.outputs:ConnectionString}
edges:
  - from: ${from.resources:Service}
    to: ${to.resources:RDSInstance}
