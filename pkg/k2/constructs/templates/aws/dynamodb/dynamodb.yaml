id: klotho.aws.DynamoDB
version: 1.0.0
description: A construct for creating an AWS DynamoDB table
resources:
  DynamoDBTable:
    type: aws:dynamodb_table
    name: ${inputs:Name}
    properties:
      Attributes: ${inputs:Attributes}
      BillingMode: ${inputs:BillingMode}
      HashKey: ${inputs:HashKey}
      RangeKey: ${inputs:RangeKey}
      Tags: ${inputs:Tags}

inputs:
  Name:
    name: Table Name
    description: The name of the DynamoDB table
    type: string
    default: my_table
    validation:
      minLength: 3
      maxLength: 255

  Attributes:
    name: Attributes
    description: List of attribute definitions for the table which includes attribute name and type
    type: list
    default:
      - Name: id
        Type: S
    properties:
      Name:
        type: string
        description: Name of the attribute
        validation:
          minLength: 1
          maxLength: 255
      Type:
        type: string
        description: The data type for the attribute, such as String (S) or Number (N)
        allowedValues:
          - S
          - N
          - B
    validation:
      minItems: 1

  BillingMode:
    name: Billing Mode
    description: The billing mode that determines how you are charged for read and write throughput and how you manage capacity
    type: string
    default: PAY_PER_REQUEST
    allowedValues:
      - PROVISIONED
      - PAY_PER_REQUEST

  HashKey:
    name: Hash Key
    description: The table hash key, which is the partition key for the DynamoDB table
    type: string
    default: id
    validation:
      minLength: 1
      maxLength: 255

  RangeKey:
    name: Range Key
    description: The table range key, which is the sort key for the DynamoDB table
    type: string
    validation:
      minLength: 1
      maxLength: 255

  Tags:
    name: Tags
    description: Key-value pairs to tag the DynamoDB table
    type: model

outputs:
  TableName:
    name: Table Name
    description: The name of the DynamoDB table
    value: ${resources:DynamoDBTable.Name}

  TableArn:
    name: Table ARN
    description: The Amazon Resource Name (ARN) of the DynamoDB table
    value: ${resources:DynamoDBTable#Arn}

