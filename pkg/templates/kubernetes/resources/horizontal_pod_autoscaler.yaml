qualified_type_name: kubernetes:horizontal_pod_autoscaler
display_name: Horizontal Pod Autoscaler
sanitize_name:
  # a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, '-' or '.',
  # and must start and end with an alphanumeric character
  # (e.g. 'example.com', regex used for validation is '[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*')]
  |
  {{ . 
    | replace `[^a-zA-Z0-9-]+` "" | replace `^[-]+` "" | replace `[-]+$` ""
  }}

properties:
  Cluster:
    type: resource
    operational_rule:
      steps:
        - direction: downstream
          resources:
            - classifications:
                - cluster
                - kubernetes
  Object:
    type: map
    properties:
      kubernetes:TypeMeta:
        type: model
        default_value:
          ApiVersion: autoscaling/v1
          Kind: HorizontalPodAutoscaler
      Metadata:
        type: model(kubernetes:ObjectMeta)
      Spec:
        type: map
        properties:
          ScaleTargetRef:
            type: map
            properties:
              Kind:
                type: string
              Name:
                type: string
              ApiVersion:
                type: string
          MinReplicas:
            type: int
          MaxReplicas:
            type: int
          Metrics:
            type: list
            properties:
              Type:
                type: string
              Resource:
                type: map
                properties:
                  Name:
                    type: string
                  Target:
                    type: map
                    properties:
                      Type:
                        type: string
                      AverageUtilization:
                        type: int
                      AverageValue:
                        type: string
                      Value:
                        type: string

classification:
  is:
    - kubernetes
  gives:
    - scalability:compute
    - highly_available:compute

delete_context:
  requires_no_upstream_or_downstream: true
views:
  dataflow: small
