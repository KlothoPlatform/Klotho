qualified_type_name: aws:rds_proxy_target_group
display_name: RDS Proxy Target Group
sanitize_name:
  # https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-rds-dbproxytargetgroup.html
  # Pattern: [A-z][0-z]*
  # Maximum: 64
  |
  {{ . 
    | replace `^[^A-z]+` "" 
    | replace `[^0-z]+` "_"
    | length 1 64
  }}

properties:
  RdsInstance:
    type: resource(aws:rds_instance)
    default_value: '{{ downstream "aws:rds_instance" .Self }}'
  RdsProxy:
    type: resource(aws:rds_proxy)
    default_value: '{{ upstream "aws:rds_proxy" .Self }}'
  TargetGroupName:
    type: string
    default_value: default
  ConnectionPoolConfigurationInfo:
    type: map
    properties:
      ConnectionBorrowTimeout:
        type: int
        default_value: 120
      InitQuery:
        type: string
      MaxConnectionsPercent:
        type: int
        default_value: 100
      MaxIdleConnectionsPercent:
        type: int
        default_value: 50
      SessionPinningFilters:
        type: list(string)

classification:
  is:
    - rds_proxy_target_group
  gives:
    - reliability:storage
