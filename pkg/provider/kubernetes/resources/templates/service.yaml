provider: kubernetes
type: service
rules:
  - enforcement: exactly_one
    direction: downstream
    classifications:
      - cluster
      - kubernetes
    set_field: Cluster
    unsatisfied_action:
      operation: create
delete_context:
  requires_no_upstream: true
configuration:
  - field: Object
    value:
      TypeMeta:
        APIVersion: v1
        Kind: Service
      ObjectMeta:
      Spec:
        Ports:
          - Name: "default-tcp"
            Port: 80
            TargetPort: 3000
            Protocol: TCP
        Selector:
        SessionAffinity: "None"
        Type: ClusterIP
